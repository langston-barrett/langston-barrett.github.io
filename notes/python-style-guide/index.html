<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <link rel="stylesheet" href="/mine.css">
  <title>langston-barrett.github.io</title>
</head>
<body>
  <div id="content">
    <h1 class="title">
      <div class="logo"><strong>langston-barrrett.github.io</strong></div>
    </h1>
    <nav>
      <a href="/">Home</a>&nbsp;&nbsp;
      <a href="/blog">Blog</a>&nbsp;&nbsp;
      <a href="/notes">Notes</a>
    </nav>
    
<h1 id="python-style-guide-1">Python Style Guide</h1>
<p>This is my personal style guide for writing Python code. As with all
style guides, this guide is incomplete, fallible, and its
recommendations aren't appropriate for every circumstance.</p>
<p>I've only recently started writing this, so it's obviously
particularly incomplete. Hopefully, it will grow as I learn and think
more!</p>
<p>This guide is focused only on recommendations that <em>aren't</em> universal
across programming languages, for such recommendations see my
[Programming Style Guide](programming.org::*Programming Style Guide).
Additionally, I don't currently publish any recommendations that
concern third-party libraries.</p>
<p>Its intended audience is intermediate or advanced Python programmers who
endeavor especially to write reliable, correct code. In particular, I'm
often willing to err on the side of reliability over &quot;Pythonic&quot; or
&quot;idiomatic&quot; code, e.g., by changing code so that it can get more
mileage/guarantees from a static type checker like Mypy, or by using
less mutation than might be &quot;expected&quot;. But to be honest, I mostly
publish this so I have somewhere with thorough explanations that I can
point people to when I make comments during code reviews.</p>
<p>The recommendations in this guide are split into three levels, based on
the author's perception of their relative importance and applicability:</p>
<ul>
<li><em>Strongly Recommended</em>: These recommendations are broadly
applicable and have a high value-to-weight ratio.</li>
<li><em>Recommended</em>: These
recommendations may apply less universally, or be less than
essential to a strong style guide.</li>
<li><em>Nice to Have</em>: These
recommendations are nice but not essential.</li>
</ul>
<p>This document aspires to confirm to <a href="meta-style-guide.md">my Meta Style Guide</a>.</p>
<p>Do you have ideas for this guide? <a href="/">Contact me</a>!</p>
<h2 id="strongly-recommended">Strongly Recommended</h2>
<h2 id="recommended">Recommended</h2>
<h3 id="use-dataclasses">Use Dataclasses</h3>
<p>Every class should be annotated with the <code>dataclasses.dataclass</code>
decorator
(<a href="https://docs.python.org/3/library/dataclasses.html#dataclasses.dataclass">doc</a>)
unless there is a specific reason not to. This still applies if you have
to write an <code>__init__</code> method.</p>
<ol>
<li>
<p>Example</p>
<p>Instead of</p>
<pre data-lang="python" style="background-color:#2b303b;color:#6c7079;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#cd74e8;">class </span><span style="color:#f0c678;">C</span><span style="color:#adb7c9;">:
</span><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">def </span><span style="color:#5ebfcc;">__init__</span><span style="color:#abb2bf;">(</span><span style="color:#eb6772;">self</span><span style="color:#abb2bf;">, </span><span style="color:#eb6772;">x</span><span style="color:#abb2bf;">: int) -&gt; </span><span style="color:#db9d63;">None</span><span style="color:#abb2bf;">:
</span><span style="color:#abb2bf;">        </span><span style="color:#eb6772;">self</span><span style="color:#abb2bf;">.x </span><span style="color:#adb7c9;">= </span><span style="color:#abb2bf;">x
</span></code></pre>
<p>write</p>
<pre data-lang="python" style="background-color:#2b303b;color:#6c7079;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#abb2bf;">@</span><span style="color:#eb6772;">dataclass
</span><span style="color:#cd74e8;">class </span><span style="color:#f0c678;">C</span><span style="color:#adb7c9;">:
</span><span style="color:#abb2bf;">    x: int
</span></code></pre>
</li>
<li>
<p>Justification</p>
<p>The <code>dataclass</code> decorator can generate all sorts of &quot;dunder&quot;
methods that you normally have to write by hand, such as <code>__init__</code>
and <code>__eq__</code>. This saves both the writer and reader of the code some
time!</p>
<p>Dialing in on <code>__eq__</code>: the implementation generated by <code>dataclass</code>
compares instances of the class field-wise. This is almost
universally more meaningful than pointer/reference equality, which
is the default for classes that inherit from <code>object</code>. Consider this
example:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#6c7079;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#eb6772;">C</span><span style="color:#abb2bf;">(</span><span style="color:#db9d63;">5</span><span style="color:#abb2bf;">) </span><span style="color:#adb7c9;">== </span><span style="color:#eb6772;">C</span><span style="color:#abb2bf;">(</span><span style="color:#db9d63;">5</span><span style="color:#abb2bf;">)
</span></code></pre>
<p>With the former implementation of <code>C</code>, this evaluates to <code>False</code>
whereas with the <code>dataclass</code> version it evaluates to <code>True</code>. If you
think this is unimportant because you don't intend to compare
instances of your class for equality, consider overriding the
<code>__eq__</code> method manually and raising an exception if it gets called
to make that assumption explicit. If you don't do that, <em>strongly</em>
consider using <code>dataclass</code>.</p>
</li>
</ol>
<h2 id="nice-to-have">Nice to Have</h2>


  </div>
</body> 
</html>
